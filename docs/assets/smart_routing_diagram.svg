<svg width="1000" height="700" xmlns="http://www.w3.org/2000/svg">
  <rect width="1000" height="700" fill="transparent"/>
  
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#e0e0e0">
    Smart Routing: Automatic Message Routing with Predictable Keys
  </text>
  
  <!-- Publisher Section -->
  <g>
    <text x="200" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#68d391">
      Publisher
    </text>
    
    <!-- Message Classes -->
    <rect x="50" y="100" width="140" height="80" rx="8" fill="#2d3748" stroke="#68d391" stroke-width="2"/>
    <text x="120" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#68d391">OrderMessage</text>
    <text x="60" y="145" font-family="monospace" font-size="10" fill="#e0e0e0">actions :validate,</text>
    <text x="80" y="160" font-family="monospace" font-size="10" fill="#e0e0e0">:process, :ship</text>
    
    <rect x="210" y="100" width="140" height="80" rx="8" fill="#2d3748" stroke="#68d391" stroke-width="2"/>
    <text x="280" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#68d391">EmailMessage</text>
    <text x="220" y="145" font-family="monospace" font-size="10" fill="#e0e0e0">actions :send,</text>
    <text x="240" y="160" font-family="monospace" font-size="10" fill="#e0e0e0">:schedule</text>
    
    <!-- Publishing -->
    <rect x="90" y="200" width="200" height="60" rx="8" fill="#1a202c" stroke="#4299e1" stroke-width="1"/>
    <text x="190" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4299e1">Publishing</text>
    <text x="100" y="240" font-family="monospace" font-size="10" fill="#e0e0e0">message.publish('process')</text>
    <text x="100" y="255" font-family="monospace" font-size="10" fill="#e0e0e0">message.publish('send')</text>
  </g>
  
  <!-- Routing Key Generation -->
  <g>
    <text x="500" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ff9800">
      Automatic Routing Key Generation
    </text>
    
    <!-- Pattern Formula -->
    <rect x="350" y="340" width="300" height="80" rx="8" fill="#2d3748" stroke="#ff9800" stroke-width="2"/>
    <text x="500" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ff9800">Routing Key Pattern</text>
    <text x="500" y="385" text-anchor="middle" font-family="monospace" font-size="16" fill="#e0e0e0">MessageClassName.action</text>
    <text x="500" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#9ca3af">Predictable • Transparent • Debuggable</text>
    
    <!-- Examples -->
    <rect x="100" y="450" width="200" height="120" rx="8" fill="#1a202c" stroke="#68d391" stroke-width="1"/>
    <text x="200" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#68d391">Order Messages</text>
    <text x="110" y="495" font-family="monospace" font-size="10" fill="#e0e0e0">OrderMessage.validate</text>
    <text x="110" y="510" font-family="monospace" font-size="10" fill="#e0e0e0">OrderMessage.process</text>
    <text x="110" y="525" font-family="monospace" font-size="10" fill="#e0e0e0">OrderMessage.ship</text>
    <text x="110" y="540" font-family="monospace" font-size="10" fill="#e0e0e0">OrderMessage.cancel</text>
    <text x="110" y="555" font-family="monospace" font-size="10" fill="#e0e0e0">OrderMessage.complete</text>
    
    <rect x="320" y="450" width="200" height="120" rx="8" fill="#1a202c" stroke="#4299e1" stroke-width="1"/>
    <text x="420" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4299e1">Email Messages</text>
    <text x="330" y="495" font-family="monospace" font-size="10" fill="#e0e0e0">EmailMessage.send</text>
    <text x="330" y="510" font-family="monospace" font-size="10" fill="#e0e0e0">EmailMessage.schedule</text>
    <text x="330" y="525" font-family="monospace" font-size="10" fill="#e0e0e0">EmailMessage.cancel</text>
    <text x="330" y="540" font-family="monospace" font-size="10" fill="#e0e0e0">EmailMessage.retry</text>
    <text x="330" y="555" font-family="monospace" font-size="10" fill="#e0e0e0">EmailMessage.bounce</text>
    
    <rect x="540" y="450" width="200" height="120" rx="8" fill="#1a202c" stroke="#9f7aea" stroke-width="1"/>
    <text x="640" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9f7aea">Report Messages</text>
    <text x="550" y="495" font-family="monospace" font-size="10" fill="#e0e0e0">ReportMessage.generate</text>
    <text x="550" y="510" font-family="monospace" font-size="10" fill="#e0e0e0">ReportMessage.email</text>
    <text x="550" y="525" font-family="monospace" font-size="10" fill="#e0e0e0">ReportMessage.archive</text>
    <text x="550" y="540" font-family="monospace" font-size="10" fill="#e0e0e0">ReportMessage.schedule</text>
    <text x="550" y="555" font-family="monospace" font-size="10" fill="#e0e0e0">ReportMessage.cleanup</text>
  </g>
  
  <!-- RabbitMQ Exchange -->
  <g>
    <text x="800" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2b6cb0">
      RabbitMQ Topic Exchange
    </text>
    
    <rect x="720" y="340" width="160" height="100" rx="8" fill="#1a365d" stroke="#2b6cb0" stroke-width="2"/>
    <text x="800" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#90cdf4">Exchange</text>
    <text x="800" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#bee3f8">Topic Routing</text>
    <text x="800" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#bee3f8">Pattern Matching</text>
    <text x="800" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#bee3f8">Flexible Bindings</text>
  </g>
  
  <!-- Queue Bindings -->
  <g>
    <text x="500" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#e0e0e0">
      Queue Binding Patterns
    </text>
    
    <!-- Single message type -->
    <rect x="50" y="630" width="180" height="60" rx="8" fill="#2d3748" stroke="#68d391" stroke-width="1"/>
    <text x="140" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#68d391">Order Worker</text>
    <text x="60" y="665" font-family="monospace" font-size="10" fill="#e0e0e0">OrderMessage.*</text>
    <text x="60" y="680" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">All order operations</text>
    
    <!-- Specific action -->
    <rect x="250" y="630" width="180" height="60" rx="8" fill="#2d3748" stroke="#4299e1" stroke-width="1"/>
    <text x="340" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#4299e1">Validation Worker</text>
    <text x="260" y="665" font-family="monospace" font-size="10" fill="#e0e0e0">*.validate</text>
    <text x="260" y="680" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">All validation actions</text>
    
    <!-- Priority queue -->
    <rect x="450" y="630" width="180" height="60" rx="8" fill="#2d3748" stroke="#f6e05e" stroke-width="1"/>
    <text x="540" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#f6e05e">Urgent Queue</text>
    <text x="460" y="665" font-family="monospace" font-size="10" fill="#e0e0e0">UrgentMessage.*</text>
    <text x="460" y="680" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">High priority messages</text>
    
    <!-- Catch all -->
    <rect x="650" y="630" width="180" height="60" rx="8" fill="#2d3748" stroke="#9f7aea" stroke-width="1"/>
    <text x="740" y="650" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#9f7aea">General Worker</text>
    <text x="660" y="665" font-family="monospace" font-size="10" fill="#e0e0e0">#</text>
    <text x="660" y="680" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">All messages</text>
  </g>
  
  <!-- Flow Arrows -->
  <defs>
    <marker id="arrow-routing" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ff9800"/>
    </marker>
  </defs>
  
  <!-- Publisher to Exchange -->
  <line x1="290" y1="240" x2="720" y2="380" stroke="#ff9800" stroke-width="3" marker-end="url(#arrow-routing)"/>
  <text x="450" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#ff9800" transform="rotate(-15 450 280)">Routing Keys</text>
  
  <!-- Exchange to Queues -->
  <line x1="750" y1="450" x2="140" y2="620" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-routing)"/>
  <line x1="800" y1="450" x2="340" y2="620" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-routing)"/>
  <line x1="830" y1="450" x2="540" y2="620" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-routing)"/>
  <line x1="850" y1="450" x2="740" y2="620" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-routing)"/>
</svg>