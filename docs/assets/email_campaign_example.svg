<svg width="900" height="600" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="600" fill="transparent"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#e0e0e0">
    Email Campaign Management Example
  </text>
  
  <!-- Campaign Flow -->
  <g>
    <text x="450" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4299e1">
      Automated Email Campaign Workflow
    </text>
    
    <!-- Step 1: Trigger -->
    <rect x="50" y="100" width="150" height="80" rx="8" fill="#2d3748" stroke="#68d391" stroke-width="2"/>
    <text x="125" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#68d391">1. Campaign Trigger</text>
    <text x="60" y="145" font-family="monospace" font-size="10" fill="#e0e0e0">User signs up</text>
    <text x="60" y="160" font-family="monospace" font-size="10" fill="#e0e0e0">Purchase made</text>
    <text x="60" y="175" font-family="monospace" font-size="10" fill="#e0e0e0">Birthday detected</text>
    
    <!-- Step 2: Schedule -->
    <rect x="220" y="100" width="150" height="80" rx="8" fill="#2d3748" stroke="#4299e1" stroke-width="2"/>
    <text x="295" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4299e1">2. Schedule Emails</text>
    <text x="230" y="145" font-family="monospace" font-size="10" fill="#e0e0e0">welcome_series()</text>
    <text x="230" y="160" font-family="monospace" font-size="10" fill="#e0e0e0">delay: immediate</text>
    <text x="230" y="175" font-family="monospace" font-size="10" fill="#e0e0e0">follow_up: +3 days</text>
    
    <!-- Step 3: Personalize -->
    <rect x="390" y="100" width="150" height="80" rx="8" fill="#2d3748" stroke="#9f7aea" stroke-width="2"/>
    <text x="465" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9f7aea">3. Personalize</text>
    <text x="400" y="145" font-family="monospace" font-size="10" fill="#e0e0e0">Load user data</text>
    <text x="400" y="160" font-family="monospace" font-size="10" fill="#e0e0e0">Generate content</text>
    <text x="400" y="175" font-family="monospace" font-size="10" fill="#e0e0e0">A/B test variant</text>
    
    <!-- Step 4: Send -->
    <rect x="560" y="100" width="150" height="80" rx="8" fill="#2d3748" stroke="#f6e05e" stroke-width="2"/>
    <text x="635" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f6e05e">4. Send Email</text>
    <text x="570" y="145" font-family="monospace" font-size="10" fill="#e0e0e0">Email service API</text>
    <text x="570" y="160" font-family="monospace" font-size="10" fill="#e0e0e0">Track delivery</text>
    <text x="570" y="175" font-family="monospace" font-size="10" fill="#e0e0e0">Handle bounces</text>
    
    <!-- Step 5: Track -->
    <rect x="730" y="100" width="150" height="80" rx="8" fill="#2d3748" stroke="#e53e3e" stroke-width="2"/>
    <text x="805" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e53e3e">5. Track Results</text>
    <text x="740" y="145" font-family="monospace" font-size="10" fill="#e0e0e0">Open rates</text>
    <text x="740" y="160" font-family="monospace" font-size="10" fill="#e0e0e0">Click tracking</text>
    <text x="740" y="175" font-family="monospace" font-size="10" fill="#e0e0e0">Conversion data</text>
  </g>
  
  <!-- Message Implementation -->
  <g>
    <text x="450" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#e0e0e0">
      EmailCampaignMessage Implementation
    </text>
    
    <rect x="50" y="250" width="800" height="140" rx="8" fill="#2d3748" stroke="#4299e1" stroke-width="2"/>
    <text x="450" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4299e1">Campaign Message Class</text>
    
    <text x="70" y="300" font-family="monospace" font-size="11" fill="#68d391">class EmailCampaignMessage &lt; BunnyFarm::Message</text>
    <text x="80" y="320" font-family="monospace" font-size="11" fill="#f6e05e">fields</text>
    <text x="130" y="320" font-family="monospace" font-size="11" fill="#e0e0e0">:user_id, :campaign_id, :template_id, :send_at, :personalization_data</text>
    <text x="80" y="340" font-family="monospace" font-size="11" fill="#f6e05e">actions</text>
    <text x="140" y="340" font-family="monospace" font-size="11" fill="#e0e0e0">:schedule, :personalize, :send, :track, :retry</text>
    
    <text x="80" y="365" font-family="monospace" font-size="11" fill="#9f7aea">def schedule</text>
    <text x="90" y="380" font-family="monospace" font-size="11" fill="#e0e0e0">publish_at(send_at, 'personalize')</text>
    <text x="80" y="395" font-family="monospace" font-size="11" fill="#9f7aea">end</text>
    
    <text x="350" y="365" font-family="monospace" font-size="11" fill="#9f7aea">def send</text>
    <text x="360" y="380" font-family="monospace" font-size="11" fill="#e0e0e0">EmailService.send(personalized_content)</text>
    <text x="350" y="395" font-family="monospace" font-size="11" fill="#9f7aea">end</text>
    
    <text x="70" y="415" font-family="monospace" font-size="11" fill="#68d391">end</text>
  </g>
  
  <!-- Campaign Types -->
  <g>
    <text x="450" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#e0e0e0">
      Campaign Type Examples
    </text>
    
    <!-- Welcome Series -->
    <rect x="50" y="470" width="200" height="100" rx="6" fill="#1a202c" stroke="#68d391" stroke-width="1"/>
    <text x="150" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#68d391">Welcome Series</text>
    <text x="60" y="510" font-family="monospace" font-size="10" fill="#e0e0e0">Day 0: Welcome email</text>
    <text x="60" y="525" font-family="monospace" font-size="10" fill="#e0e0e0">Day 3: Getting started tips</text>
    <text x="60" y="540" font-family="monospace" font-size="10" fill="#e0e0e0">Day 7: Feature highlights</text>
    <text x="60" y="555" font-family="monospace" font-size="10" fill="#e0e0e0">Day 14: Success stories</text>
    
    <!-- Abandoned Cart -->
    <rect x="270" y="470" width="200" height="100" rx="6" fill="#1a202c" stroke="#f6e05e" stroke-width="1"/>
    <text x="370" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f6e05e">Abandoned Cart</text>
    <text x="280" y="510" font-family="monospace" font-size="10" fill="#e0e0e0">1 hour: Gentle reminder</text>
    <text x="280" y="525" font-family="monospace" font-size="10" fill="#e0e0e0">1 day: Special discount</text>
    <text x="280" y="540" font-family="monospace" font-size="10" fill="#e0e0e0">3 days: Last chance</text>
    <text x="280" y="555" font-family="monospace" font-size="10" fill="#e0e0e0">7 days: Product suggestions</text>
    
    <!-- Re-engagement -->
    <rect x="490" y="470" width="200" height="100" rx="6" fill="#1a202c" stroke="#9f7aea" stroke-width="1"/>
    <text x="590" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9f7aea">Re-engagement</text>
    <text x="500" y="510" font-family="monospace" font-size="10" fill="#e0e0e0">30 days inactive: Check-in</text>
    <text x="500" y="525" font-family="monospace" font-size="10" fill="#e0e0e0">60 days: What's new</text>
    <text x="500" y="540" font-family="monospace" font-size="10" fill="#e0e0e0">90 days: Win-back offer</text>
    <text x="500" y="555" font-family="monospace" font-size="10" fill="#e0e0e0">180 days: Goodbye email</text>
    
    <!-- Birthday -->
    <rect x="710" y="470" width="180" height="100" rx="6" fill="#1a202c" stroke="#e53e3e" stroke-width="1"/>
    <text x="800" y="490" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e53e3e">Birthday/Anniversary</text>
    <text x="720" y="510" font-family="monospace" font-size="10" fill="#e0e0e0">Birthday: Special gift</text>
    <text x="720" y="525" font-family="monospace" font-size="10" fill="#e0e0e0">Account anniversary</text>
    <text x="720" y="540" font-family="monospace" font-size="10" fill="#e0e0e0">Purchase anniversary</text>
    <text x="720" y="555" font-family="monospace" font-size="10" fill="#e0e0e0">Milestone celebrations</text>
  </g>
  
  <!-- Flow arrows -->
  <defs>
    <marker id="arrow-email" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#ff9800"/>
    </marker>
  </defs>
  
  <line x1="200" y1="140" x2="220" y2="140" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-email)"/>
  <line x1="370" y1="140" x2="390" y2="140" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-email)"/>
  <line x1="540" y1="140" x2="560" y2="140" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-email)"/>
  <line x1="710" y1="140" x2="730" y2="140" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-email)"/>
</svg>